<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="format-detection" content="telephone=no"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<title>Docs - Automating Builds with Visual Studio | Durandal</title>
		<meta name="description" content="Durandal is a cross-device, cross-platform client framework written in JavaScript and designed to make Single Page Applications (SPAs) easy to create and maintain." />
		<meta name="keywords" content="Durandal, SPA, HTML5, CSS, JavaScript, Singe Page Application, Knockout, RequireJS" />
		<meta name="author" content="EisenbergEffect" />

		<meta http-equiv="X-Powered-By" content="DocPad v6.38.1"/>

		<link rel="apple-touch-startup-image" href="images/ios-startup-image-landscape.png" media="(orientation:landscape)" />
		<link rel="apple-touch-startup-image" href="images/ios-startup-image-portrait.png" media="(orientation:portrait)" />
		<link rel="apple-touch-icon" href="images/icon.png"/>

		<!-- Shims: IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script async src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<!-- Styles -->
		<link  rel="stylesheet" href="/vendor/twitter-bootstrap/css/bootstrap.css" /><link  rel="stylesheet" href="/vendor/twitter-bootstrap/css/bootstrap-responsive.css" /><link  rel="stylesheet" href="/vendor/prettify.css" /><link  rel="stylesheet" href="/styles/style.css" />

		<script type="text/javascript">
		    if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
		        var msViewportStyle = document.createElement("style");
		        var mq = "@@-ms-viewport{width:auto!important}";
		        msViewportStyle.appendChild(document.createTextNode(mq));
		        document.getElementsByTagName("head")[0].appendChild(msViewportStyle);
		    }
		</script>

		<script type="text/javascript" src="//use.typekit.net/kan0fyh.js"></script>
		<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
	</head>
	<body>
		<div class="navbar navbar-inverse navbar-fixed-top">
		    <div class="navbar-inner">
		        <a class="brand" href="/">
		            <span>&nbsp;&nbsp;Durandal</span>
		        </a>

		        
					<ul class="nav">
						
							<li typeof="sioc:Page" about="/pages/get-started" class="">
								<a href="/pages/get-started" property="dc:title">Get Started</a>
							</li>
						
							<li typeof="sioc:Page" about="/pages/downloads" class="">
								<a href="/pages/downloads" property="dc:title">Downloads</a>
							</li>
						
							<li typeof="sioc:Page" about="/pages/docs" class="">
								<a href="/pages/docs" property="dc:title">Docs</a>
							</li>
						
							<li typeof="sioc:Page" about="/pages/support" class="">
								<a href="/pages/support" property="dc:title">Support/Training</a>
							</li>
						
							<li typeof="sioc:Page" about="/pages/consultation" class="">
								<a href="/pages/consultation" property="dc:title">Consultation</a>
							</li>
						
							<li typeof="sioc:Page" about="/pages/showcase" class="">
								<a href="/pages/showcase" property="dc:title">Showcase</a>
							</li>
						
						<li class="donate">
							<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
						      <input type="hidden" name="cmd" value="_s-xclick">
						      <input type="hidden" name="hosted_button_id" value="JHLN2GQYN6Z3W">
						      <input class="btn btn-small btn-success" type="submit" name="submit" value="Donate">
						    </form>
						</li>
					</ul>

					<ul class="nav pull-right">
						<li>
							<a href="https://bluespire.zendesk.com" class="support">Login</a>
						</li>
					</ul>
				
		    </div>
		</div>

		<section class="container content docs">
  <h1>Automating Builds with Visual Studio</h1>
<h4> </h4>
<p>It is a recommened practice to optimize your application for deploy. If you are working in an environment based on MSBuild or using Visual Studio in your day to day development and testing, then you may wish to automate this process. Below you will find some simple instructions explaining how to do this.</p>
<h4>Install Dependencies</h4>
<ol>
<li>Install NodeJS from <a href="http://nodejs.org">http://nodejs.org</a></li>
<li>Install Weyland via NPM using the following command <code>npm install -g weyland</code></li>
</ol>
<h4>Add A Config File</h4>
<p>At the project root create a js file named <em>weyland-config.js</em>
You can use the config file from the Nuget or VSIX install as is, except remove this line or your build will fail: <code>mainConfigFile: &#39;App/main.js&#39;</code> (This is fixed as of 2.0.1.)</p>
<h4>Add the Post Build Event</h4>
<p>Go to the project&#39;s properties and select <code>Build Events</code>. In the post build event add the following:</p>
<pre class="prettyprint linenums">cd $(ProjectDir)
weyland build</pre><p>If you ony want to build when the Release configuration is selected, use the following:</p>
<pre class="prettyprint linenums">if &#39;$(Configuration)&#39;==&#39;Release&#39; (
    cd $(ProjectDir)
    weyland build
)</pre><p>Build your project. You should see the weyland build output in the Output window, with a last line similar to: &quot;Optimized build created at ...App\main-built.js&quot;</p>
<h4>Include Generated Files</h4>
<p>In the solution explorer, select &quot;Show All Files&quot;. Under the App folder, locate <em>main-built.js</em>.
Right click and select &#39;Include in Project&#39;.</p>
<h4>Auto-Load Debug vs. Release</h4>
<p>Optionally, you can use the following code in your html page to automatically load the correct file (main.js vs. main-built.js).</p>
<pre class="prettyprint linenums">@if (HttpContext.Current.IsDebuggingEnabled) {
    &lt;script type=&quot;text/javascript&quot; src=&quot;~/Scripts/require.js&quot; data-main=&quot;@Url.Content(&quot;~/App/main&quot;)&quot;&gt;&lt;/script&gt;
}
else {
    &lt;script type=&quot;text/javascript&quot; src=&quot;~/App/main-built.js&quot;&gt;&lt;/script&gt;
}</pre>
</section>

		<footer class="footer">
		  <div class="container">
		    <p>Durandal is licensed under the <a href="https://raw.github.com/BlueSpire/Durandal/master/License.txt">MIT License</a>.</p>
		    <p>Lovingly created by <a href="http://twitter.com/eisenbergeffect" target="_blank">@eisenbergeffect</a>.</p>
		    <p>Site design crafted by <a href="https://twitter.com/@scriswell" target="_blank">@scriswell</a> of <a href="https://twitter.com/@The_UI_Guy" target="_blank">@The_UI_Guy</a> and <a href="https://twitter.com/hfjallemark" target="_blank">@hfjallemark</a>.</p>
		  </div>
		  <br />
		  <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
	        <input type="hidden" name="cmd" value="_s-xclick">
	        <input type="hidden" name="hosted_button_id" value="JHLN2GQYN6Z3W">
	        <input class="btn btn-med" type="submit" name="submit" value="Help Grow Durandal. Donate Now.">
	      </form>
		</footer>

		<script src="/vendor/jquery.js"></script>
		<script src="/vendor/modernizr.js"></script>
		<script src="/vendor/prettify.js"></script>
		<script src="/scripts/behavior.js"></script>

		

		
			<script type="text/javascript">
			  var _gaq = _gaq || [];
			  _gaq.push(['_setAccount', 'UA-38441871-1']);
			  _gaq.push(['_trackPageview']);

			  (function() {
			    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			  })();
			</script>
		
	</body>
</html>
